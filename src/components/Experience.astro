---
import { Icon } from 'astro-icon/components'

const experiences = [
  {
    role: 'Frontend Engineer',
    company: 'Alephium',
    date: '2021 - Present',
    location: 'Switzerland',
    description:
      "Lead frontend engineer and maintainer of Alephium's wallet and explorer ecosystem, building secure, high-performance blockchain apps used by 20,000+ monthly users across web, desktop, and mobile.",
    bullets: [],
    live: true,
  },
  {
    role: 'Web Developer',
    company: 'Freelance',
    date: '2019 - 2022',
    location: 'Switzerland',
    description:
      'Designed and shipped fast, reliable websites for startups and small businesses, focusing on performance, accessibility, and maintainability using modern React-based stacks.',
    bullets: [],
  },
  {
    role: 'Software Engineer',
    company: 'Petro-Logistics SA',
    date: '2019 - 2021',
    location: 'Switzerland',
    description:
      "Led the development of the company's website with modern static web architecture and designed the internal systems infrastructure including automated backups, PKI, and infrastructure provisioning.",
    bullets: [],
  },
  {
    role: 'Frontend Engineer & Project Lead',
    company: 'Bity SA',
    date: '2018 - 2019',
    location: 'Switzerland',
    description:
      "Led frontend development of Bity's website and open-source exchange client while collaborating with designers and backend teams.",
    bullets: [],
  },
  {
    role: 'Frontend Engineer',
    company: 'Station AG',
    date: '2017 - 2018',
    location: 'Switzerland',
    description:
      'Built interactive web experiences for high-profile clients while also taking on Scrum-master responsibilities.',
    bullets: [],
  },
  {
    role: 'Full-Stack Software Engineer',
    company: 'Indico - CERN',
    date: '2014 - 2017',
    location: 'Switzerland',
    description:
      'Worked on the full rewrite of Indico, an open-source conference-management platform used worldwide, contributing across frontend, backend, and platform modernization',
    bullets: [],
  },
  {
    role: 'Full-Stack Software Engineer - Internship',
    company: 'CERN',
    date: '2013 - 2014',
    location: 'Switzerland',
    description: '',
    bullets: [],
  },
  {
    role: 'Full-Stack Software Engineer - Internship',
    company: 'Aidgency Software',
    date: '2012 - 2013',
    location: 'Germany',
    description: '',
    bullets: [],
  },
]
---

<div class="relative ml-4 flex flex-col gap-12 border-l-2 border-gray-200 pl-6 dark:border-gray-700">
  {
    experiences.map((exp) => (
      <div class="group relative">
        {/* Timeline dot */}
        <span
          class={`absolute top-1 -left-[35px] h-5 w-5 rounded-full border-4 border-white dark:border-gray-900 ${
            exp.live ? 'animate-ping-ring bg-green-500' : 'bg-gray-300 dark:bg-gray-600'
          }`}
        />

        <div class="flex flex-col gap-2">
          <div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white">
              {exp.role} <span class="font-normal text-gray-500">@ {exp.company}</span>
            </h3>
            <span class="text-sm font-medium whitespace-nowrap text-gray-500">{exp.date}</span>
          </div>

          <div class="mb-2 flex items-center gap-1 text-sm text-gray-500">
            <Icon name="lucide:map-pin" class="h-4 w-4" />
            <span>{exp.location}</span>
          </div>

          {exp.description && <p class="mb-2 text-gray-600 dark:text-gray-300">{exp.description}</p>}

          {exp.bullets.length > 0 && (
            <ul class="ml-2 list-inside list-disc space-y-1 text-gray-600 dark:text-gray-300">
              {exp.bullets.map((bullet) => (
                <li>{bullet}</li>
              ))}
            </ul>
          )}
        </div>
      </div>
    ))
  }
</div>

<style>
  .animate-ping-ring {
    animation: ping-ring 2s cubic-bezier(0, 0, 0.2, 1) infinite;
  }

  @keyframes ping-ring {
    0% {
      box-shadow: 0 0 0 0 oklch(0.723 0.219 142.1 / 0.6);
    }
    70% {
      box-shadow: 0 0 0 8px oklch(0.723 0.219 142.1 / 0);
    }
    100% {
      box-shadow: 0 0 0 0 oklch(0.723 0.219 142.1 / 0);
    }
  }
</style>
